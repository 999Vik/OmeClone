{"remainingRequest":"/Users/Mac/Downloads/Omeclone/node_modules/babel-loader/lib/index.js!/Users/Mac/Downloads/Omeclone/node_modules/eslint-loader/index.js??ref--13-0!/Users/Mac/Downloads/Omeclone/src/store/actions.js","dependencies":[{"path":"/Users/Mac/Downloads/Omeclone/src/store/actions.js","mtime":1570804640000},{"path":"/Users/Mac/Downloads/Omeclone/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Mac/Downloads/Omeclone/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/Mac/Downloads/Omeclone/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgdXRpbCBmcm9tICIuLi91dGlsIjsKLyoqCiAqIEhhbmRsZSBlcnJvcnMgd2hpY2ggb2NjdXIgd2hlbiB0cnlpbmcgdG8gYWNjZXNzIHRoZSBsb2NhbCBtZWRpYQogKiBoYXJkd2FyZTsgdGhhdCBpcywgZXhjZXB0aW9ucyB0aHJvd24gYnkgZ2V0VXNlck1lZGlhKCkuIFRoZSB0d28gbW9zdAogKiBsaWtlbHkgc2NlbmFyaW9zIGFyZSB0aGF0IHRoZSB1c2VyIGhhcyBubyBjYW1lcmEgYW5kL29yIG1pY3JvcGhvbmUKICogb3IgdGhhdCB0aGV5IGRlY2xpbmVkIHRvIHNoYXJlIHRoZWlyIGVxdWlwbWVudCB3aGVuIHByb21wdGVkLiBJZgogKiB0aGV5IHNpbXBseSBvcHRlZCBub3QgdG8gc2hhcmUgdGhlaXIgbWVkaWEsIHRoYXQncyBub3QgcmVhbGx5IGFuCiAqIGVycm9yLCBzbyB3ZSB3b24ndCBwcmVzZW50IGEgbWVzc2FnZSBpbiB0aGF0IHNpdHVhdGlvbi4KICovCgpmdW5jdGlvbiBoYW5kbGVHZXRVc2VyTWVkaWFFcnJvcihlcnIpIHsKICB1dGlsLnRyYWNlKGVycik7CgogIHN3aXRjaCAoZXJyLm5hbWUpIHsKICAgIGNhc2UgJ05vdEZvdW5kRXJyb3InOgogICAgICBhbGVydCgnVW5hYmxlIHRvIG9wZW4geW91ciBjYWxsIGJlY2F1c2Ugbm8gY2FtZXJhIGFuZC9vciBtaWNyb3Bob25lIHdlcmUgZm91bmQuJyk7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgJ1NlY3VyaXR5RXJyb3InOgogICAgY2FzZSAnUGVybWlzc2lvbkRlbmllZEVycm9yJzoKICAgICAgLy8gRG8gbm90aGluZzsgdGhpcyBpcyB0aGUgc2FtZSBhcyB0aGUgdXNlciBjYW5jZWxpbmcgdGhlIGNhbGwuCiAgICAgIGJyZWFrOwoKICAgIGRlZmF1bHQ6CiAgICAgIGFsZXJ0KCdFcnJvciBvcGVuaW5nIHlvdXIgY2FtZXJhIGFuZC9vciBtaWNyb3Bob25lOiAnICsgZXJyLm1lc3NhZ2UpOwogICAgICBicmVhazsKICB9Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICAvKioKICAgKiBBIG5ldyBJQ0UgY2FuZGlkYXRlIGhhcyBiZWVuIHJlY2VpdmVkIGZyb20gdGhlIG90aGVyIHBlZXIuIENhbGwKICAgKiBSVENQZWVyQ29ubmVjdGlvbi5hZGRJY2VDYW5kaWRhdGUoKSB0byBzZW5kIGl0IGFsb25nIHRvIHRoZQogICAqIGxvY2FsIElDRSBmcmFtZXdvcmsuCiAgICovCiAgYWRkSWNlQ2FuZGlkYXRlOiBmdW5jdGlvbiBhZGRJY2VDYW5kaWRhdGUoX3JlZiwgY2FuZGlkYXRlSW5mbykgewogICAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZTsKICAgIHZhciBjYW5kaWRhdGUgPSBuZXcgUlRDSWNlQ2FuZGlkYXRlKGNhbmRpZGF0ZUluZm8pOwogICAgdXRpbC5sb2coJyoqKiBBZGRpbmcgcmVjZWl2ZWQgSUNFIGNhbmRpZGF0ZTogJyArIEpTT04uc3RyaW5naWZ5KGNhbmRpZGF0ZSkpOwogICAgcmV0dXJuIHN0YXRlLnBlZXJDb25uZWN0aW9uLmFkZEljZUNhbmRpZGF0ZShjYW5kaWRhdGUpOwogIH0sCiAgc2V0TG9jYWxEZXNjcmlwdGlvbjogZnVuY3Rpb24gc2V0TG9jYWxEZXNjcmlwdGlvbihfcmVmMiwgZGVzY3JpcHRpb24pIHsKICAgIHZhciBzdGF0ZSA9IF9yZWYyLnN0YXRlOwogICAgdXRpbC5sb2coJy0tLT4gU2V0dGluZyBsb2NhbCBkZXNjcmlwdGlvbiB0byB0aGUgb2ZmZXInKTsKICAgIHJldHVybiBzdGF0ZS5wZWVyQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKGRlc2NyaXB0aW9uKTsKICB9LAogIHNldFJlbW90ZURlc2NyaXB0aW9uOiBmdW5jdGlvbiBzZXRSZW1vdGVEZXNjcmlwdGlvbihfcmVmMywgc2RwKSB7CiAgICB2YXIgc3RhdGUgPSBfcmVmMy5zdGF0ZTsKICAgIHV0aWwubG9nKCctLS0+IFNldHRpbmcgcmVtb3RlIGRlc2NyaXB0aW9uJyk7CiAgICB2YXIgZGVzY3JpcHRpb24gPSBuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHNkcCk7CiAgICByZXR1cm4gc3RhdGUucGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24oZGVzY3JpcHRpb24pOwogIH0sCiAgY3JlYXRlT2ZmZXI6IGZ1bmN0aW9uIGNyZWF0ZU9mZmVyKF9yZWY0KSB7CiAgICB2YXIgc3RhdGUgPSBfcmVmNC5zdGF0ZTsKICAgIHV0aWwubG9nKCctLS0+IENyZWF0aW5nIG9mZmVyJyk7CiAgICByZXR1cm4gc3RhdGUucGVlckNvbm5lY3Rpb24uY3JlYXRlT2ZmZXIoKTsKICB9LAogIHNlbmRPZmZlclRvUGVlcjogZnVuY3Rpb24gc2VuZE9mZmVyVG9QZWVyKF9yZWY1KSB7CiAgICB2YXIgc3RhdGUgPSBfcmVmNS5zdGF0ZTsKICAgIHV0aWwubG9nKCctLS0+IFNlbmRpbmcgdGhlIG9mZmVyIHRvIHRoZSByZW1vdGUgcGVlcicpOwogICAgc3RhdGUuc29ja2V0LmVtaXQoJ3ZpZGVvLW9mZmVyJywgc3RhdGUucGVlckNvbm5lY3Rpb24ubG9jYWxEZXNjcmlwdGlvbik7CiAgfSwKICBjcmVhdGVBbnN3ZXI6IGZ1bmN0aW9uIGNyZWF0ZUFuc3dlcihfcmVmNikgewogICAgdmFyIHN0YXRlID0gX3JlZjYuc3RhdGU7CiAgICB1dGlsLmxvZygnLS0tPiBDcmVhdGluZyBhbnN3ZXInKTsKICAgIHJldHVybiBzdGF0ZS5wZWVyQ29ubmVjdGlvbi5jcmVhdGVBbnN3ZXIoKTsKICB9LAogIHNlbmRBbnN3ZXJUb1BlZXI6IGZ1bmN0aW9uIHNlbmRBbnN3ZXJUb1BlZXIoX3JlZjcpIHsKICAgIHZhciBzdGF0ZSA9IF9yZWY3LnN0YXRlOwogICAgdXRpbC5sb2coJy0tLT4gU2VuZGluZyBhbnN3ZXIgdG8gdGhlIHJlbW90ZSBwZWVyJyk7CiAgICBzdGF0ZS5zb2NrZXQuZW1pdCgndmlkZW8tYW5zd2VyJywgc3RhdGUucGVlckNvbm5lY3Rpb24ubG9jYWxEZXNjcmlwdGlvbik7CiAgfSwKICBoYW5nVXBDYWxsOiBmdW5jdGlvbiBoYW5nVXBDYWxsKF9yZWY4KSB7CiAgICB2YXIgc3RhdGUgPSBfcmVmOC5zdGF0ZTsKICAgIHV0aWwubG9nKCctLS0+IE5vdGlmeSB0aGUgcmVtb3RlIHBlZXIgdG8gaGFuZyB1cCB0aGUgY2FsbCcpOwogICAgc3RhdGUuc29ja2V0LmVtaXQoJ2hhbmctdXAnKTsKICB9LAogIHBpbmc6IGZ1bmN0aW9uIHBpbmcoX3JlZjkpIHsKICAgIHZhciBzdGF0ZSA9IF9yZWY5LnN0YXRlOwogICAgc3RhdGUuc29ja2V0LmVtaXQoJ3BpbmcnKTsKICB9LAogIGdldFVzZXJNZWRpYTogZnVuY3Rpb24gZ2V0VXNlck1lZGlhKF9yZWYxMCkgewogICAgdmFyIGNvbW1pdCA9IF9yZWYxMC5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmMTAuc3RhdGU7CiAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoc3RhdGUubWVkaWFDb25zdHJhaW50cykudGhlbihmdW5jdGlvbiAobWVkaWFTdHJlYW0pIHsKICAgICAgY29tbWl0KCdhZGRMb2NhbFN0cmVhbScsIG1lZGlhU3RyZWFtKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgaGFuZGxlR2V0VXNlck1lZGlhRXJyb3IoZXJyKTsgLy8gTWFrZSBzdXJlIHdlIHNodXQgZG93biBvdXIgZW5kIG9mIHRoZSBSVENQZWVyQ29ubmVjdGlvbiBzbyB3ZSdyZSByZWFkeSB0byB0cnkgYWdhaW4uCgogICAgICBjb21taXQoJ2Nsb3NlUGVlckNvbm5lY3Rpb24nKTsKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["/Users/Mac/Downloads/Omeclone/src/store/actions.js"],"names":["util","handleGetUserMediaError","err","trace","name","alert","message","addIceCandidate","candidateInfo","state","candidate","RTCIceCandidate","log","JSON","stringify","peerConnection","setLocalDescription","description","setRemoteDescription","sdp","RTCSessionDescription","createOffer","sendOfferToPeer","socket","emit","localDescription","createAnswer","sendAnswerToPeer","hangUpCall","ping","getUserMedia","commit","navigator","mediaDevices","mediaConstraints","then","mediaStream","catch"],"mappings":"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","sourcesContent":["import util from '../util'\n\n/**\n * Handle errors which occur when trying to access the local media\n * hardware; that is, exceptions thrown by getUserMedia(). The two most\n * likely scenarios are that the user has no camera and/or microphone\n * or that they declined to share their equipment when prompted. If\n * they simply opted not to share their media, that's not really an\n * error, so we won't present a message in that situation.\n */\nfunction handleGetUserMediaError (err) {\n  util.trace(err)\n\n  switch (err.name) {\n    case 'NotFoundError':\n      alert('Unable to open your call because no camera and/or microphone were found.')\n      break\n    case 'SecurityError':\n    case 'PermissionDeniedError':\n      // Do nothing; this is the same as the user canceling the call.\n      break\n    default:\n      alert('Error opening your camera and/or microphone: ' + err.message)\n      break\n  }\n}\n\nexport default {\n  /**\n   * A new ICE candidate has been received from the other peer. Call\n   * RTCPeerConnection.addIceCandidate() to send it along to the\n   * local ICE framework.\n   */\n  addIceCandidate ({ state }, candidateInfo) {\n    const candidate = new RTCIceCandidate(candidateInfo)\n    util.log('*** Adding received ICE candidate: ' + JSON.stringify(candidate))\n    return state.peerConnection.addIceCandidate(candidate)\n  },\n\n  setLocalDescription ({ state }, description) {\n    util.log('---> Setting local description to the offer')\n    return state.peerConnection.setLocalDescription(description)\n  },\n\n  setRemoteDescription ({ state }, sdp) {\n    util.log('---> Setting remote description')\n    const description = new RTCSessionDescription(sdp)\n    return state.peerConnection.setRemoteDescription(description)\n  },\n\n  createOffer ({ state }) {\n    util.log('---> Creating offer')\n    return state.peerConnection.createOffer()\n  },\n\n  sendOfferToPeer ({ state }) {\n    util.log('---> Sending the offer to the remote peer')\n    state.socket.emit('video-offer', state.peerConnection.localDescription)\n  },\n\n  createAnswer ({ state }) {\n    util.log('---> Creating answer')\n    return state.peerConnection.createAnswer()\n  },\n\n  sendAnswerToPeer ({ state }) {\n    util.log('---> Sending answer to the remote peer')\n    state.socket.emit('video-answer', state.peerConnection.localDescription)\n  },\n\n  hangUpCall ({ state }) {\n    util.log('---> Notify the remote peer to hang up the call')\n    state.socket.emit('hang-up')\n  },\n\n  ping ({ state }) {\n    state.socket.emit('ping')\n  },\n\n  getUserMedia ({ commit, state }) {\n    return navigator.mediaDevices.getUserMedia(state.mediaConstraints)\n      .then((mediaStream) => {\n        commit('addLocalStream', mediaStream)\n      })\n      .catch((err) => {\n        handleGetUserMediaError(err)\n        // Make sure we shut down our end of the RTCPeerConnection so we're ready to try again.\n        commit('closePeerConnection')\n      })\n  }\n}\n"]}]}