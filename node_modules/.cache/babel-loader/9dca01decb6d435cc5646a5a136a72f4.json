{"remainingRequest":"/Users/Mac/Documents/GitHub/OmeClone/node_modules/babel-loader/lib/index.js!/Users/Mac/Documents/GitHub/OmeClone/node_modules/eslint-loader/index.js??ref--13-0!/Users/Mac/Documents/GitHub/OmeClone/src/store/plugins.js","dependencies":[{"path":"/Users/Mac/Documents/GitHub/OmeClone/src/store/plugins.js","mtime":1570804640000},{"path":"/Users/Mac/Documents/GitHub/OmeClone/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Mac/Documents/GitHub/OmeClone/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/Mac/Documents/GitHub/OmeClone/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgY3JlYXRlTG9nZ2VyIGZyb20gJ3Z1ZXgvZGlzdC9sb2dnZXInOwppbXBvcnQgcm9vdFN0YXRlIGZyb20gIi4vc3RhdGUiOwppbXBvcnQgdXRpbCBmcm9tICIuLi91dGlsIjsKLyoqCiAqIFNpZ25hbGluZyBtZXNzYWdlczogdGhlc2UgbWVzc2FnZXMgYXJlIHVzZWQgdG8gdHJhZGUgV2ViUlRDCiAqIHNpZ25hbGluZyBpbmZvcm1hdGlvbiBkdXJpbmcgbmVnb3RpYXRpb25zIGxlYWRpbmcgdXAgdG8gYSB2aWRlbyBjYWxsLgogKi8KCi8qIEEgbmV3IElDRSBjYW5kaWRhdGUgaGFzIGJlZW4gcmVjZWl2ZWQgKi8KCmZ1bmN0aW9uIGhhbmRsZU5ld0ljZUNhbmRpZGF0ZShtc2csIGRpc3BhdGNoKSB7CiAgZGlzcGF0Y2goJ2FkZEljZUNhbmRpZGF0ZScsIG1zZykuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgcmV0dXJuIHV0aWwudHJhY2UoIkVycm9yICIuY29uY2F0KGVyci5uYW1lLCAiOiAiKS5jb25jYXQoZXJyLm1lc3NhZ2UpKTsKICB9KTsKfQovKiBJbnZpdGF0aW9uIGFuZCBvZmZlciB0byBjaGF0ICovCgoKZnVuY3Rpb24gaGFuZGxlVmlkZW9PZmZlcihtc2csIGRpc3BhdGNoKSB7CiAgZGlzcGF0Y2goJ3NldFJlbW90ZURlc2NyaXB0aW9uJywgbXNnKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBkaXNwYXRjaCgnY3JlYXRlQW5zd2VyJyk7CiAgfSkudGhlbihmdW5jdGlvbiAoYW5zd2VyKSB7CiAgICByZXR1cm4gZGlzcGF0Y2goJ3NldExvY2FsRGVzY3JpcHRpb24nLCBhbnN3ZXIpOwogIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGRpc3BhdGNoKCdzZW5kQW5zd2VyVG9QZWVyJyk7CiAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgcmV0dXJuIHV0aWwudHJhY2UoIkVycm9yICIuY29uY2F0KGVyci5uYW1lLCAiOiAiKS5jb25jYXQoZXJyLm1lc3NhZ2UpKTsKICB9KTsKfQovKiBDYWxsZWUgaGFzIGFuc3dlcmVkIG91ciBvZmZlciAqLwoKCmZ1bmN0aW9uIGhhbmRsZVZpZGVvQW5zd2VyKG1zZywgZGlzcGF0Y2gpIHsKICBkaXNwYXRjaCgnc2V0UmVtb3RlRGVzY3JpcHRpb24nLCBtc2cpLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgIHJldHVybiB1dGlsLnRyYWNlKCJFcnJvciAiLmNvbmNhdChlcnIubmFtZSwgIjogIikuY29uY2F0KGVyci5tZXNzYWdlKSk7CiAgfSk7Cn0KLyogVGhlIG90aGVyIHBlZXIgaGFzIGh1bmcgdXAgdGhlIGNhbGwgKi8KCgpmdW5jdGlvbiBoYW5kbGVIYW5nVXAoc3RhdGUsIGNvbW1pdCkgewogIGNvbW1pdCgnY2xvc2VQZWVyQ29ubmVjdGlvbicpOwogIGNvbW1pdCgnY3JlYXRlUGVlckNvbm5lY3Rpb24nKTsKICBjb21taXQoJ2FkZExvY2FsU3RyZWFtJywgc3RhdGUubG9jYWxTdHJlYW0pOwp9Ci8qIEEgcmVtb3RlIHBlZXIgaGFzIGJlZW4gZm91bmQgYW5kIG1hdGNoZWQgKi8KCgpmdW5jdGlvbiBoYW5kbGVQZWVyTWF0Y2hlZChkaXNwYXRjaCkgewogIGRpc3BhdGNoKCdjcmVhdGVPZmZlcicpLnRoZW4oZnVuY3Rpb24gKG9mZmVyKSB7CiAgICByZXR1cm4gZGlzcGF0Y2goJ3NldExvY2FsRGVzY3JpcHRpb24nLCBvZmZlcik7CiAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gZGlzcGF0Y2goJ3NlbmRPZmZlclRvUGVlcicpOwogIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgIHJldHVybiB1dGlsLnRyYWNlKCJFcnJvciAiLmNvbmNhdChlcnIubmFtZSwgIjogIikuY29uY2F0KGVyci5tZXNzYWdlKSk7CiAgfSk7Cn0KLyoqCiAqIENoYXR0aW5nIG1lc3NhZ2VzOiB0aGVzZSBtZXNzYWdlcyBhcmUgdXNlZCB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSByZW1vdGUgcGVlci4KICovCgoKZnVuY3Rpb24gaGFuZGxlTWVzc2FnZShtc2csIGNvbW1pdCkgewogIGNvbW1pdCgnYWRkTWVzc2FnZScsIG1zZyk7Cn0KCmZ1bmN0aW9uIGhhbmRsZUNhbnZhcyhtc2csIGNvbW1pdCkgewogIGNvbW1pdCgnc2V0UmVtb3RlQ2FudmFzJywgbXNnKTsKfQoKdmFyIHdlYlNvY2tldFBsdWdpbiA9IGZ1bmN0aW9uIHdlYlNvY2tldFBsdWdpbihfcmVmKSB7CiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSwKICAgICAgY29tbWl0ID0gX3JlZi5jb21taXQsCiAgICAgIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaDsKCiAgcm9vdFN0YXRlLnNvY2tldC5lbWl0ID0gZnVuY3Rpb24gKHR5cGUsIGRhdGEpIHsKICAgIHJvb3RTdGF0ZS5zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7CiAgICAgIHR5cGU6IHR5cGUsCiAgICAgIGRhdGE6IGRhdGEKICAgIH0pKTsKICB9OwoKICByb290U3RhdGUuc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoJ29wZW4nLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICB1dGlsLmxvZygnVGhlIHdlYnNvY2tldCBjb25uZWN0aW9uIGhhcyBiZWVuIG9wZW5lZCBzdWNjZXNzZnVsbHkuJyk7CiAgICBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgIGRpc3BhdGNoKCdwaW5nJyk7CiAgICB9LCA1MzAwMCk7CiAgfSk7CiAgcm9vdFN0YXRlLnNvY2tldC5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsIGZ1bmN0aW9uIChldnQpIHsKICAgIHV0aWwubG9nKCJUaGUgd2Vic29ja2V0IGNvbm5lY3Rpb24gaGFzIGJlZW4gY2xvc2VkIHdpdGggZXJyb3IgY29kZSAiLmNvbmNhdChldnQuY29kZSwgIjogIikuY29uY2F0KGV2dC5yZWFzb24pKTsKICB9KTsKICByb290U3RhdGUuc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24gKGV2dCkgewogICAgdXRpbC50cmFjZShldnQpOwogIH0pOwogIHJvb3RTdGF0ZS5zb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChldnQpIHsKICAgIHZhciBtc2cgPSBKU09OLnBhcnNlKGV2dC5kYXRhKTsKCiAgICBzd2l0Y2ggKG1zZy50eXBlKSB7CiAgICAgIGNhc2UgJ25ldy1pY2UtY2FuZGlkYXRlJzoKICAgICAgICBoYW5kbGVOZXdJY2VDYW5kaWRhdGUobXNnLmRhdGEsIGRpc3BhdGNoKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3ZpZGVvLW9mZmVyJzoKICAgICAgICBoYW5kbGVWaWRlb09mZmVyKG1zZy5kYXRhLCBkaXNwYXRjaCk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICd2aWRlby1hbnN3ZXInOgogICAgICAgIGhhbmRsZVZpZGVvQW5zd2VyKG1zZy5kYXRhLCBkaXNwYXRjaCk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdoYW5nLXVwJzoKICAgICAgICBoYW5kbGVIYW5nVXAoc3RhdGUsIGNvbW1pdCk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdwZWVyLW1hdGNoZWQnOgogICAgICAgIGhhbmRsZVBlZXJNYXRjaGVkKGRpc3BhdGNoKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ21lc3NhZ2UnOgogICAgICAgIGhhbmRsZU1lc3NhZ2UobXNnLmRhdGEsIGNvbW1pdCk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdjYW52YXMnOgogICAgICAgIGhhbmRsZUNhbnZhcyhtc2cuZGF0YSwgY29tbWl0KTsKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfSk7Cn07CgpleHBvcnQgZGVmYXVsdCBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gW2NyZWF0ZUxvZ2dlcigpLCB3ZWJTb2NrZXRQbHVnaW5dIDogW3dlYlNvY2tldFBsdWdpbl07"},{"version":3,"sources":["/Users/Mac/Documents/GitHub/OmeClone/src/store/plugins.js"],"names":["createLogger","rootState","util","handleNewIceCandidate","msg","dispatch","catch","err","trace","name","message","handleVideoOffer","then","answer","handleVideoAnswer","handleHangUp","state","commit","localStream","handlePeerMatched","offer","handleMessage","handleCanvas","webSocketPlugin","socket","emit","type","data","send","JSON","stringify","addEventListener","evt","log","setInterval","code","reason","parse","process","env","NODE_ENV"],"mappings":"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","sourcesContent":["import createLogger from 'vuex/dist/logger'\nimport rootState from './state'\nimport util from '../util'\n\n/**\n * Signaling messages: these messages are used to trade WebRTC\n * signaling information during negotiations leading up to a video call.\n */\n\n/* A new ICE candidate has been received */\nfunction handleNewIceCandidate (msg, dispatch) {\n  dispatch('addIceCandidate', msg)\n    .catch((err) => util.trace(`Error ${err.name}: ${err.message}`))\n}\n\n/* Invitation and offer to chat */\nfunction handleVideoOffer (msg, dispatch) {\n  dispatch('setRemoteDescription', msg)\n    .then(() => dispatch('createAnswer'))\n    .then((answer) => dispatch('setLocalDescription', answer))\n    .then(() => dispatch('sendAnswerToPeer'))\n    .catch((err) => util.trace(`Error ${err.name}: ${err.message}`))\n}\n\n/* Callee has answered our offer */\nfunction handleVideoAnswer (msg, dispatch) {\n  dispatch('setRemoteDescription', msg)\n    .catch((err) => util.trace(`Error ${err.name}: ${err.message}`))\n}\n\n/* The other peer has hung up the call */\nfunction handleHangUp (state, commit) {\n  commit('closePeerConnection')\n  commit('createPeerConnection')\n  commit('addLocalStream', state.localStream)\n}\n\n/* A remote peer has been found and matched */\nfunction handlePeerMatched (dispatch) {\n  dispatch('createOffer')\n    .then((offer) => dispatch('setLocalDescription', offer))\n    .then(() => dispatch('sendOfferToPeer'))\n    .catch((err) => util.trace(`Error ${err.name}: ${err.message}`))\n}\n\n/**\n * Chatting messages: these messages are used to communicate with the remote peer.\n */\n\nfunction handleMessage (msg, commit) {\n  commit('addMessage', msg)\n}\n\nfunction handleCanvas (msg, commit) {\n  commit('setRemoteCanvas', msg)\n}\n\nconst webSocketPlugin = ({ state, commit, dispatch }) => {\n  rootState.socket.emit = (type, data) => {\n    rootState.socket.send(JSON.stringify({ type, data }))\n  }\n\n  rootState.socket.addEventListener('open', (evt) => {\n    util.log('The websocket connection has been opened successfully.')\n\n    setInterval(() => {\n      dispatch('ping')\n    }, 53000)\n  })\n\n  rootState.socket.addEventListener('close', (evt) => {\n    util.log(`The websocket connection has been closed with error code ${evt.code}: ${evt.reason}`)\n  })\n\n  rootState.socket.addEventListener('error', (evt) => {\n    util.trace(evt)\n  })\n\n  rootState.socket.addEventListener('message', (evt) => {\n    const msg = JSON.parse(evt.data)\n\n    switch (msg.type) {\n      case 'new-ice-candidate':\n        handleNewIceCandidate(msg.data, dispatch)\n        break\n      case 'video-offer':\n        handleVideoOffer(msg.data, dispatch)\n        break\n      case 'video-answer':\n        handleVideoAnswer(msg.data, dispatch)\n        break\n      case 'hang-up':\n        handleHangUp(state, commit)\n        break\n      case 'peer-matched':\n        handlePeerMatched(dispatch)\n        break\n      case 'message':\n        handleMessage(msg.data, commit)\n        break\n      case 'canvas':\n        handleCanvas(msg.data, commit)\n        break\n      default:\n        break\n    }\n  })\n}\n\nexport default process.env.NODE_ENV !== 'production'\n  ? [createLogger(), webSocketPlugin]\n  : [webSocketPlugin]\n"]}]}